#!/usr/bin/env ruby

# (C) Guillaume Roderick (webzakimbo)
# MIT licence.

require 'irb'
require "irb/completion"
require 'bcome'
require 'yaml'

def get_context_crumbs
  if ARGV && ARGV[0]
    # TODO - validation on format here foobar:foobar:foobar
    return ARGV[0].split(":")    
  end
  return []
end

context_crumbs = get_context_crumbs

START_PROMPT = "bcome"
BCOME = ::Bcome::WorkspaceManager.new
VERBOSE = true

IRB.setup nil
IRB.conf[:MAIN_CONTEXT] = IRB::Irb.new.context

BCOME.init_workspace({ :crumbs => context_crumbs, :args => ARGV[1] })
