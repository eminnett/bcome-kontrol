

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Executing commands with run &mdash; Bcome 1.3.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to use pseudo-tty within Bcome" href="pseudo_tty.html" />
    <link rel="prev" title="SSH" href="ssh_to_a_server.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Bcome
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">What is Bcome?</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../what/about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../what/quick_look.html">A quick look</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../starting/installation.html">Installation</a></li>
</ul>
<p class="caption"><span class="caption-text">Namespace Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/basic_configuration.html">Basic configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/connecting_clouds.html">Connecting clouds</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/cleaning_up_server_names.html">Cleaning up server names</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/caching_server_lookups.html">Caching server lookups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/inventory_filtering.html">Inventory filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/sub_selected_inventories.html">Sub-selected inventories</a></li>
</ul>
<p class="caption"><span class="caption-text">SSH configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ssh_configuration/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ssh_configuration/direct_connections.html">Direct connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ssh_configuration/proxied_connections.html">Proxied connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ssh_configuration/bootstrapping.html">Bootstrapping</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ssh_configuration/configuration_inheritance.html">Configuration Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ssh_configuration/making_use_of_your_local_config.html">Making use of your local SSH config</a></li>
</ul>
<p class="caption"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="navigation.html">Navigation</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching_inventories.html">Caching Inventories</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing_connections.html">Testing connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssh_to_a_server.html">SSH</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Executing commands with run</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#using-keyed-access">Using keyed access</a></li>
<li class="toctree-l2"><a class="reference internal" href="#from-the-shell">From the shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="#on-a-sub-selection-of-machines">On a sub-selection of machines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pseudo_tty.html">How to use pseudo-tty within Bcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="pseudo_tty.html#access-from-the-shell">Access from the shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="pseudo_tty.html#incorporating-pseudo-tty-sessions-directly-into-bcome">Incorporating Pseudo-tty sessions directly into Bcome</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_transfers.html">File transfers</a></li>
<li class="toctree-l1"><a class="reference internal" href="interactive_mode.html">Interactive Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="bootstrapping_mode.html">Bootstrapping mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="port_forwarding.html">Port Forwarding</a></li>
</ul>
<p class="caption"><span class="caption-text">Basic Scripting</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripting/bash_scripting.html">Bash scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripting/ruby_scripting.html">Basic ruby scripting</a></li>
</ul>
<p class="caption"><span class="caption-text">Orchestration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../orchestration/registry.html">The Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orchestration/metadata_framework.html">The metadata framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orchestration/internal_hooks.html">Internal Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orchestration/external_hooks.html">External Hooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../orchestration/tags.html">Tags</a></li>
</ul>
<p class="caption"><span class="caption-text">Recipes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../recipes/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/security_patching.html">Mass orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/server_spec_integration.html">Server Spec integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/port_forwarding.html">Port Forwarding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes/terraform.html">Terraform</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bcome</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Executing commands with run</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/usage/executing_commands.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="executing-commands-with-run">
<h1>Executing commands with run<a class="headerlink" href="#executing-commands-with-run" title="Permalink to this headline">¶</a></h1>
<p>The ‘run’ command allows you to execute commands on your servers over SSH. You can target either individual, or groups of servers (where you execute the same command on multiple machines in parallel).</p>
<p>The examples in this section will reference the following pseudo network configuration:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root <span class="o">(</span>collection<span class="o">)</span>
  <span class="p">|</span>- staging <span class="o">(</span>inventory<span class="o">)</span>
    <span class="p">|</span>- app1 <span class="o">(</span>server<span class="o">)</span>
  <span class="p">|</span>- qa <span class="o">(</span>inventory<span class="o">)</span>
    <span class="p">|</span>- app1 <span class="o">(</span>server<span class="o">)</span>
  <span class="p">|</span>- production <span class="o">(</span>inventory<span class="o">)</span>
    <span class="p">|</span>- app1 <span class="o">(</span>server<span class="o">)</span>
    <span class="p">|</span>- app2 <span class="o">(</span>server<span class="o">)</span>
</pre></div>
</div>
<p>Consider the following use case: You want to view the free memory usage on your servers, and want to use the command “free -m”.</p>
<div class="section" id="using-keyed-access">
<h2>Using keyed access<a class="headerlink" href="#using-keyed-access" title="Permalink to this headline">¶</a></h2>
<p>Execute your command on just app1 within the production namespace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bcome production:app1:run <span class="s2">&quot;free -m&quot;</span>
</pre></div>
</div>
<p>Execute your command on both app1 and app2 within the production namespace:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bcome production:run <span class="s2">&quot;free -m&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="from-the-shell">
<h2>From the shell<a class="headerlink" href="#from-the-shell" title="Permalink to this headline">¶</a></h2>
<p>Enter the namespace within which you want to run your command and then enter</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; run <span class="s2">&quot;free -m&quot;</span>
</pre></div>
</div>
<p>If you enter a server namespace, the command will be executed on just that server.</p>
<p>If you enter an inventory namespace, the command will be executed on all selected servers within that inventory.</p>
<p>If you enter a collection namespace, the command will be executed on all servers belonging to all selected inventories &amp; collections within that namespace.</p>
</div>
<div class="section" id="on-a-sub-selection-of-machines">
<h2>On a sub-selection of machines<a class="headerlink" href="#on-a-sub-selection-of-machines" title="Permalink to this headline">¶</a></h2>
<p>Imagine you want to execute a command on all machines with qa &amp; staging namespaces only, you would:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bcome
&gt; workon qa, staging
&gt; run <span class="s2">&quot;command&quot;</span>
</pre></div>
</div>
<p>Or, just ‘app1’ within the production namespace, you would:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; bcome production
&gt; workon app1
&gt; run <span class="s2">&quot;command&quot;</span>
</pre></div>
</div>
<p>See the commands ‘workon’, ‘enable’, and ‘disable’ from the commands list for further information on how to filter selections: <a class="reference internal" href="commands.html"><span class="doc">Commands</span></a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pseudo_tty.html" class="btn btn-neutral float-right" title="How to use pseudo-tty within Bcome" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ssh_to_a_server.html" class="btn btn-neutral" title="SSH" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, webzakimbo

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>